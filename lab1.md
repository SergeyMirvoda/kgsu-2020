# Лабораторная № 3
## Работа с ClickHouse

0. Объединиться в группы, придумать своей группе код
1. Подключиться к лабораторной ВМ по SSH
2. Создать БД с названием содержащим код своей группы
3. На диске находится файл hits_v1.tsv требуется загрузить данные из него в таблицу
4. Пользуясь примерами команд из раздела "Получение таблиц из сжатых tsv-файлов" https://clickhouse.tech/docs/ru/getting-started/example-datasets/metrica/
4.1 Создайте в своей БД таблицу hits_v1 со структурой указанной в разделе 4
4.2 При помощи команды ``head`` загрузите первые 10000 строк из файла ``hits_v1.tsv`` в свою таблицу (в примере нужно заменить команду ``cat`` на команду ``head  --lines=число_строк``)
4.3 Подключитесь к БД с помощью ``clickhouse-client --user default --password qwerty12345`` и проверьте число строк
4.4 Повторите п 4., но только с командой ``tail``, в отчёте укажите чем они отличаются
5. При помощи команды ``describe`` https://clickhouse.tech/docs/ru/sql-reference/statements/describe-table/ посмотрите структуру созданной вами таблицы  
5.1 Соответствует ли она тому  SQL, который вы запускали?
5.2 Руководствуясь полученными данными о структуре подумайте какие секции (partition) можно создать, ответ обоснуйте
6. Объём данных
6.1 Узнайте размеры вашей таблицы на диске при помощи следующего запроса:  
```
SELECT formatReadableSize(sum(bytes)) AS size, sum(rows) AS rows FROM system.parts WHERE active and table ='имя_вашей таблицы'
```
6.2 Соответствует ли число строк количеству загруженных?
6.3 Запомните размер данных. Загрузите ещё 10000 строк пропустив первые 10000.
6.4 Проверьте размер ещё раз. На сколько вырос объём данных?
6.5 Сохраните эти же 10000 строк на диск (примерно так:  ``head --lines=10 hits_v1.tsv > temp.txt``)
6.6 Узнайте полученного файла и сравните его с размером этих же данных в КХ
6.7 Сделайте вывод

> В свой репозиторий выложить отчёт в формате Word, PDF или md в котором подтвердить скриншотами введённые команды и ответы на них КХ.
